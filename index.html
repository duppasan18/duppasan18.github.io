<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç½‘ç»œæ–‡æ˜å®ˆæŠ¤è®¡åˆ’</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f0f9ff; }
        .page { display: none; min-height: 100vh; flex-direction: column; }
        .page.active { display: flex; }
        .option-card { transition: all 0.2s; border: 2px solid transparent; }
        .option-card:active { transform: scale(0.98); background-color: #e0f2fe; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
        ::-webkit-scrollbar { width: 0px; background: transparent; }
    </style>
</head>
<body class="text-gray-800">

    <div id="p-cover" class="page active items-center justify-center p-6 text-center bg-white">
        <div class="mb-10">
            <div class="w-24 h-24 bg-blue-500 rounded-full mx-auto mb-6 flex items-center justify-center shadow-lg shadow-blue-200">
                <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
            </div>
            <h1 class="text-3xl font-bold text-gray-900 mb-2">ç½‘ç»œæ–‡æ˜<br>å®ˆæŠ¤è®¡åˆ’</h1>
            <p class="text-blue-600 mt-4">æµ‹æµ‹ä½ çš„ç½‘ç»œç¤¾äº¤äººæ ¼</p>
        </div>
        <button onclick="nav('p-guide')" class="w-full max-w-xs bg-blue-600 text-white py-4 rounded-full font-bold shadow-lg hover:bg-blue-700 transition">
            ç«‹å³å¼€å¯
        </button>
    </div>

    <div id="p-guide" class="page items-center justify-center p-8 bg-white">
        <div class="max-w-md w-full">
            <h2 class="text-2xl font-bold text-blue-800 mb-6">ç­”é¢˜è¯´æ˜</h2>
            <div class="space-y-4 text-gray-600 leading-relaxed bg-blue-50 p-6 rounded-2xl mb-8">
                <p>æˆ‘ä»¬å°†è¿›å…¥ <strong>20ä¸ªæ ¡å›­ç½‘ç»œåœºæ™¯</strong>ã€‚</p>
                <p>è¯·æ ¹æ®ä½ çš„ç¬¬ä¸€ååº”åšå‡ºé€‰æ‹©ã€‚è¿™ä¸ä»…æ˜¯æµ‹è¯•ï¼Œæ›´æ˜¯ä¸€æ¬¡å…³äºâ€œé€‰æ‹©â€çš„å®éªŒã€‚</p>
                <p class="text-sm text-blue-500 mt-4">* æ¯é¢˜åªæœ‰ 1 ä¸ªæœ€ä¼˜è§£ï¼Œä½ çš„é€‰æ‹©å°†å†³å®šæœ€ç»ˆçš„èº«ä»½ç»“å±€ã€‚</p>
            </div>
            <button onclick="startGame()" class="w-full bg-green-500 text-white py-4 rounded-full font-bold shadow-lg hover:bg-green-600 transition">
                å¼€å§‹ç­”é¢˜
            </button>
        </div>
    </div>

    <div id="p-quiz" class="page bg-slate-50">
        <div class="bg-white p-4 shadow-sm sticky top-0 z-10">
            <div class="flex justify-between text-xs text-gray-500 mb-2">
                <span>è¿›åº¦</span>
                <span id="progress-text">1/20</span>
            </div>
            <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                <div id="progress-bar" class="h-full bg-blue-500 transition-all duration-300" style="width: 5%"></div>
            </div>
        </div>

        <div class="flex-1 p-6 max-w-md mx-auto w-full overflow-y-auto">
            <div id="quiz-container" class="fade-in">
                <span id="q-topic" class="inline-block px-3 py-1 bg-blue-100 text-blue-600 rounded-full text-xs font-bold mb-4"></span>
                <h3 id="q-text" class="text-xl font-bold text-gray-900 mb-8 leading-snug"></h3>
                
                <div id="options-box" class="space-y-3">
                    </div>
                
                <div id="hint-box" class="hidden mt-6 p-4 bg-yellow-50 border border-yellow-100 rounded-xl">
                    <div class="flex items-start">
                        <span class="text-yellow-500 text-xl mr-2">ğŸ’¡</span>
                        <p id="q-hint" class="text-sm text-gray-600 leading-relaxed pt-1"></p>
                    </div>
                    <button onclick="nextQuestion()" class="mt-4 w-full bg-gray-900 text-white py-2 rounded-lg text-sm font-bold">
                        ä¸‹ä¸€é¢˜
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="p-calc" class="page items-center justify-center bg-blue-600 text-white">
        <div class="text-center">
            <div class="text-6xl font-bold mb-4" id="final-score-display">0</div>
            <p class="text-blue-100">æ­£åœ¨ç”Ÿæˆä½ çš„ç½‘ç»œèº«ä»½...</p>
        </div>
    </div>

    <div id="p-result" class="page bg-gray-50 p-6 overflow-y-auto">
        <div class="max-w-md mx-auto w-full my-auto">
            <div class="bg-white rounded-3xl shadow-xl overflow-hidden mb-6">
                <div id="res-header" class="h-24 bg-blue-500 flex items-center justify-center relative overflow-hidden">
                    <div class="absolute inset-0 bg-black opacity-10"></div>
                    <h2 id="res-title" class="text-3xl font-bold text-white relative z-10"></h2>
                </div>
                
                <div class="p-8">
                    <div class="flex items-center justify-between mb-6">
                        <span id="res-tag" class="px-3 py-1 rounded-md text-sm font-bold bg-gray-100 text-gray-600"></span>
                        <span class="text-gray-400 text-sm">å¾—åˆ†: <span id="res-score"></span></span>
                    </div>
                    
                    <div class="space-y-4 mb-8">
                        <p id="res-desc" class="text-gray-600 leading-relaxed text-justify"></p>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-xl text-center mb-6">
                        <p class="text-xs text-gray-400 mb-1">DESIGN ANALYSIS</p>
                        <p class="text-sm text-gray-500 font-medium">ç»“å±€ä¸æ˜¯è¯„åˆ¤ä½ ï¼Œè€Œæ˜¯æé†’ä½ ï¼š<br>é€‰æ‹©å¾ˆé‡è¦ã€‚</p>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="startGame()" class="bg-white border-2 border-blue-500 text-blue-500 py-3 rounded-xl font-bold hover:bg-blue-50">
                            å†ç©ä¸€æ¬¡
                            <span class="block text-[10px] font-normal opacity-70">æ¢ä¸€ç§é€‰æ‹©çœ‹çœ‹</span>
                        </button>
                        <button onclick="alert('è¯·æˆªå±åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼')" class="bg-blue-500 text-white py-3 rounded-xl font-bold hover:bg-blue-600">
                            åˆ†äº«ç»“æœ
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ•°æ®æºé…ç½® [cite: 1-106]
        const quizData = [
            // ä¸»é¢˜ä¸€ï¼šæ ¡å›­ç”Ÿæ´»ä¸­çš„ç½‘ç»œæš´åŠ›
            { topic: "æ ¡å›­ç”Ÿæ´»", q: "ç­çº§ç¾¤æœ‰äººæˆªå›¾å˜²ç¬‘åŒå­¦ï¼Œä½ åº”æ€ä¹ˆåšï¼Ÿ", ops: ["è½¬å‘ç»™æ›´å¤šæœ‹å‹", "ç§ä¸‹åŠå¯¼å¹¶åˆ¶æ­¢", "å‡è£…æ²¡çœ‹è§"], ans: 1, hint: "åŠæ—¶åˆ¶æ­¢æ˜¯å‡å°‘äºŒæ¬¡ä¼ æ’­æœ€æœ‰æ•ˆçš„æ–¹å¼ï¼Œä½ çš„æ€åº¦å¯èƒ½å½±å“æ•´ä¸ªç¾¤çš„æ°›å›´ã€‚" },
            { topic: "æ ¡å›­ç”Ÿæ´»", q: "åŒ¿åæ ‘æ´æœ‰äººäººèº«æ”»å‡»æŸåŒå­¦ï¼Œåšæ³•æ˜¯ï¼Ÿ", ops: ["è·Ÿé£è¯„è®º", "åŠæ—¶ä¸¾æŠ¥", "æˆªå›¾å‘ç»™å½“äº‹äºº"], ans: 1, hint: "åŒ¿åä¸æ˜¯å…è´£ï¼Œå¹³å°ä¸¾æŠ¥æœºåˆ¶æ˜¯å‹åˆ¶æ¶æ„å¸–å­çš„é‡è¦æ‰‹æ®µã€‚" },
            { topic: "æ ¡å›­ç”Ÿæ´»", q: "åŒå­¦æŠŠåˆ«äººç…§ç‰‡åšæˆè¡¨æƒ…åŒ…ï¼Œä½ åº”ï¼Ÿ", ops: ["åˆ†äº«å‡ºå»", "å¾æ±‚å½“äº‹äººæ„è§", "è°ƒä¾ƒä¸¤å¥"], ans: 1, hint: "è‚–åƒæƒåŒæ ·é€‚ç”¨äºç½‘ç»œï¼Œå¯¹ä»–äººç…§ç‰‡çš„ä½¿ç”¨éœ€è¦ç»è¿‡åŒæ„ã€‚" },
            { topic: "æ ¡å›­ç”Ÿæ´»", q: "å‘ç°åŒå­¦å·æ‹è§†é¢‘å¹¶åœ¨ç¾¤é‡Œä¼ æ’­ï¼Œä½ ä¼šï¼Ÿ", ops: ["ä¿å­˜ä¸‹æ¥", "æé†’åˆ é™¤å¹¶é“æ­‰", "è½¬å‘è®¨è®º"], ans: 1, hint: "æœªç»å…è®¸æ‹æ‘„å’Œä¼ æ’­ä»–äººå½±åƒï¼Œå·²ç»æ„æˆå¯¹éšç§çš„ä¾µçŠ¯ã€‚" },
            
            // ä¸»é¢˜äºŒï¼šæ—¥å¸¸äº’åŠ¨ä¸­çš„è¨€è¯­è¾¹ç•Œ
            { topic: "è¨€è¯­è¾¹ç•Œ", q: "ç¾¤é‡Œæœ‰äººç”¨â€œç©ç¬‘â€è´¬ä½æŸäººï¼Œä½ åº”è¯¥ï¼Ÿ", ops: ["ä¸€èµ·ç¬‘", "æé†’ç©ç¬‘æœ‰è¾¹ç•Œ", "ç§ä¸‹å®‰æ…°å—å®³è€…"], ans: 1, hint: "è½»æ¾æ°›å›´ä¸ä»£è¡¨å¯ä»¥éšæ„ä¼¤å®³ä»–äººï¼ŒæŒ‡å‡ºè¾¹ç•Œèƒ½æå‡ç¾¤ä½“å®‰å…¨æ„Ÿã€‚" },
            { topic: "è¨€è¯­è¾¹ç•Œ", q: "æœ‰äººè¯„è®ºåŒå­¦â€œæˆç»©å·®æ²¡æ•‘äº†â€ï¼Œä½ åº”è¯¥ï¼Ÿ", ops: ["é™„å’Œ", "å¼•å¯¼æ­£å‘é¼“åŠ±", "è®©å½“äº‹äººåå‡»"], ans: 1, hint: "è¯„ä»·å­¦ä¹ è¡¨ç°æ—¶åº”å…³æ³¨åŠªåŠ›ï¼Œä¸åº”ç»™å¯¹æ–¹è´´æ ‡ç­¾ã€‚" },
            { topic: "è¨€è¯­è¾¹ç•Œ", q: "çœ‹åˆ°æœ‰äººå› æ€§åˆ«ç¾¤å˜²ä»–äººï¼Œä½ æ€ä¹ˆåŠï¼Ÿ", ops: ["çœ‹çƒ­é—¹", "æ¸©å’ŒæŒ‡å‡ºä¸å½“", "éª‚å›å»"], ans: 1, hint: "ç†æ€§è¡¨è¾¾èƒ½ä¿ƒè¿›å¥åº·è®¨è®ºï¼Œé¿å…è®©è®¨è®ºå˜æˆäº’éª‚ã€‚" },
            { topic: "è¨€è¯­è¾¹ç•Œ", q: "æƒ…ç»ªæ¿€åŠ¨æƒ³åœ¨ç½‘ä¸Šâ€œå‘æ³„â€ï¼Œæ›´åº”è¯¥ï¼Ÿ", ops: ["ç›´æ¥å‘", "å†·é™é¿å…æ”»å‡»", "æŒ‡åé“å§“éª‚"], ans: 1, hint: "æƒ…ç»ªåŒ–è¾“å‡ºå¾€å¾€æ˜¯ç½‘ç»œæš´åŠ›çš„èµ·ç‚¹ã€‚" },

            // ä¸»é¢˜ä¸‰ï¼šä¿¡æ¯ä¼ æ’­æ—¶çš„è´£ä»»æ„è¯†
            { topic: "è´£ä»»æ„è¯†", q: "æœ‰äººæˆªå–éƒ¨åˆ†èŠå¤©è®°å½•å¼•å¯¼èˆ†è®ºï¼Œä½ è®¤ä¸ºï¼Ÿ", ops: ["æˆªå›¾å³äº‹å®", "è¿™æ˜¯è¯¯å¯¼è¡Œä¸º", "æœ‰è¯´æœåŠ›"], ans: 1, hint: "æ–­ç« å–ä¹‰ä¼šæ”¹å˜åŸæ„ï¼Œæ˜¯ç½‘ç»œæš´åŠ›å¸¸è§å½¢å¼ä¹‹ä¸€ã€‚" },
            { topic: "è´£ä»»æ„è¯†", q: "é¢å¯¹äº‰è®®ï¼Œæƒ³å‘æ¿€è¿›è§‚ç‚¹åšå…³æ³¨ï¼Œåº”ï¼Ÿ", ops: ["è¶çƒ­å‘å£°", "è°¨æ…è¡¨è¾¾", "è¶Šæç«¯è¶Šå¥½"], ans: 1, hint: "æµé‡ä¸åº”å»ºç«‹åœ¨å¯¹ä»–äººçš„ä¼¤å®³ä¹‹ä¸Šã€‚" },
            { topic: "è´£ä»»æ„è¯†", q: "æœ‰äººç”¨æƒ…ç»ªè¯­è¨€å¼•å¯¼ç«™é˜Ÿï¼Œä½ åº”ï¼Ÿ", ops: ["è·Ÿéšç«™é˜Ÿ", "ä¿æŒç†æ€§", "è½¬å‘åˆ¶é€ å¯¹ç«‹"], ans: 1, hint: "æƒ…ç»ªåŒ–ä¼ æ’­å¾€å¾€æ˜¯ç½‘ç»œå†²çªå‡çº§çš„å‚¬åŒ–å‰‚ã€‚" },
            { topic: "è´£ä»»æ„è¯†", q: "è½¬å‘æ”»å‡»æ€§å†…å®¹æ„å‘³ç€ï¼Ÿ", ops: ["ä¸éœ€è´Ÿè´£", "æ‰¿æ‹…ä¼ æ’­è´£ä»»", "åªæ˜¯è·¯è¿‡"], ans: 1, hint: "æ¯ä¸€æ¬¡è½¬å‘ï¼Œéƒ½æ˜¯ä¸€æ¬¡ç«‹åœºé€‰æ‹©ã€‚" },

            // ä¸»é¢˜å››ï¼šç½‘ç»œæš´åŠ›æ—¶çš„è‡ªæˆ‘ä¿æŠ¤
            { topic: "è‡ªæˆ‘ä¿æŠ¤", q: "è¢«æ¶æ„è¯„è®ºæ”»å‡»ï¼Œé¦–å…ˆåº”è¯¥ï¼Ÿ", ops: ["äº’éª‚", "æˆªå›¾å¹¶ä¸¾æŠ¥", "é”€å·é€ƒé¿"], ans: 1, hint: "ç•™å­˜è¯æ®æ˜¯åç»­ä¿æŠ¤è‡ªå·±çš„é‡è¦æ­¥éª¤ï¼ŒåŒæ—¶é¿å…æƒ…ç»ªåŒ–å›åº”ã€‚" },
            { topic: "è‡ªæˆ‘ä¿æŠ¤", q: "å‘ç°æœ‰å¸–å­é€ è°£ä½ ï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ", ops: ["å‘é•¿æ–‡å›å‡»", "æ±‚åŠ©å¹³å°/è€å¸ˆ", "å‡è£…æ²¡çœ‹è§"], ans: 1, hint: "åˆç†å¯»æ±‚ç¬¬ä¸‰æ–¹ä»‹å…¥æ¯”å•æ‰“ç‹¬æ–—æ›´æœ‰æ•ˆã€æ›´å®‰å…¨ã€‚" },
            { topic: "è‡ªæˆ‘ä¿æŠ¤", q: "ç½‘æš´å¯¼è‡´æƒ…ç»ªä½è½ï¼Œæœ€å¥½çš„åšæ³•æ˜¯ï¼Ÿ", ops: ["å¿ç€", "ä¸ä¿¡ä»»è€…æ²Ÿé€š", "ç½‘ä¸Šéª‚å›å»"], ans: 1, hint: "åŠæ—¶æ±‚åŠ©èƒ½é¿å…æƒ…ç»ªæ¶åŒ–ï¼Œæ²Ÿé€šæ˜¯æœ€å¥½çš„ç¼“å†²ã€‚" },
            { topic: "è‡ªæˆ‘ä¿æŠ¤", q: "ç…§ç‰‡è¢«æ¶æ„ç¯¡æ”¹ä¼ æ’­ï¼Œæ­£ç¡®åšæ³•æ˜¯ï¼Ÿ", ops: ["å¿ä¸€å¿", "å–è¯å¹¶å¤„ç†", "å‘å¸–å¯¹éª‚"], ans: 1, hint: "æ¶æ„På›¾å¯èƒ½æ¶‰åŠäººæ ¼æƒä¾µå®³ï¼Œéœ€åŠæ—¶å¤„ç†ã€‚" },

            // ä¸»é¢˜äº”ï¼šç½‘ç»œå‹å–„çš„å€¡å¯¼è€…
            { topic: "å‹å–„å€¡å¯¼", q: "çœ‹åˆ°æœ‰äººé­ç½‘æš´ï¼Œæœ€å®‰å…¨æœ‰æ•ˆçš„æ˜¯ï¼Ÿ", ops: ["è¯„è®ºåŒºå¤§æˆ˜", "ä¸¾æŠ¥å¹¶æ”¯æŒ", "éšä¾¿è¯´ä¸¤å¥"], ans: 1, hint: "å–„æ„è¡ŒåŠ¨ä¸ç­‰äºå†²åŠ¨æˆ˜æ–—ï¼Œç†æ€§å¸®åŠ©æ›´èƒ½å‡å°‘ä¼¤å®³ã€‚" },
            { topic: "å‹å–„å€¡å¯¼", q: "ç¾¤å‹çˆ†æ–™â€œæŸè€å¸ˆå‡ºäº‹äº†â€ï¼Œä½ åº”è¯¥ï¼Ÿ", ops: ["ç«‹åˆ»è½¬å‘", "æ ¸å®æ¥æº", "äºŒæ¬¡åˆ›ä½œ"], ans: 1, hint: "æœªç»æ ¸å®çš„ä¿¡æ¯å®¹æ˜“æ¼”å˜ä¸ºç½‘ç»œæš´åŠ›çš„æºå¤´ã€‚" },
            { topic: "å‹å–„å€¡å¯¼", q: "æƒ³å¸¦æ¥æ­£èƒ½é‡ï¼Œä½ èƒ½æ€ä¹ˆåšï¼Ÿ", ops: ["ä¸å‚ä¸", "è½¬å‘å–„æ„å†…å®¹", "ç‚¹èµéª‚æˆ˜"], ans: 1, hint: "å°å°çš„æ­£å‘äº’åŠ¨ï¼Œä¼šå½±å“ä»–äººå¯¹ç½‘ç»œç¯å¢ƒçš„æ„Ÿå—ã€‚" },
            { topic: "å‹å–„å€¡å¯¼", q: "æœ‹å‹é­ç½‘æš´å€¾è¯‰ï¼Œåˆé€‚çš„å›åº”æ˜¯ï¼Ÿ", ops: ["åˆ«æƒ³å¤ªå¤š", "ç†è§£å¹¶é¼“åŠ±", "å»ºè®®åå‡»"], ans: 1, hint: "è¢«ç†è§£æœ¬èº«ï¼Œå°±æ˜¯å¯¹ç½‘ç»œæš´åŠ›çš„åå‡»ã€‚" }
        ];

        // ç»“å±€æ•°æ® [cite: 110-149]
        const results = [
            { min: 80, title: "ç½‘ç»œå®ˆæŠ¤è€…", tag: "å¥½ç»“å±€", color: "bg-green-500", desc: "åœ¨å…³é”®æ—¶åˆ»ï¼Œä½ é€‰æ‹©äº†ç†æ€§ä¸å–„æ„ã€‚é¢å¯¹æ¶æ„ï¼Œä½ æ²¡æœ‰æ²‰é»˜ï¼Œè€Œæ˜¯åŠæ—¶åˆ¶æ­¢ã€‚ä½ çš„é€‰æ‹©å‡ç¼“äº†ä¼¤å®³çš„æ‰©æ•£ã€‚ç½‘ç»œç¯å¢ƒå› ä¸ºä½ çš„ä¸€æ¬¡æ¬¡æ­£ç¡®åˆ¤æ–­ï¼Œå˜å¾—æ›´å®‰å…¨äº†ä¸€ç‚¹ã€‚ä½ è¯æ˜äº†â€”â€”æ™®é€šäººï¼Œä¹Ÿèƒ½æˆä¸ºå®ˆæŠ¤è€…ã€‚" },
            { min: 60, title: "ç†æ€§æ—è§‚è€…", tag: "æ™®é€šç»“å±€", color: "bg-blue-500", desc: "ä½ æ²¡æœ‰å‚ä¸æ”»å‡»ï¼Œä½†ä¹Ÿæ²¡æœ‰ç«™å‡ºæ¥å‘å£°ã€‚ä½ é€‰æ‹©äº†è‡ªä¿ä¸æ²‰é»˜ï¼Œé¿å…äº†ç›´æ¥ä¼¤å®³ä»–äººï¼Œå´ä¹Ÿé”™è¿‡äº†é˜»æ­¢ç½‘ç»œæš´åŠ›çš„æœºä¼šã€‚ç½‘ç»œä¸–ç•Œæ²¡æœ‰å› ä¸ºä½ è€Œå˜åï¼Œä½†ä¹Ÿæ²¡æœ‰å› æ­¤å˜å¥½ã€‚" },
            { min: 40, title: "ä¿¡æ¯è½¬å‘è€…", tag: "è­¦ç¤ºç»“å±€", color: "bg-yellow-500", desc: "ä½ å¹¶éå‡ºäºæ¶æ„ï¼Œä½†ä½ çš„è½¬å‘ã€è°ƒä¾ƒæˆ–å›´è§‚ï¼Œæˆä¸ºäº†ç½‘ç»œæš´åŠ›æ‰©æ•£çš„ä¸€éƒ¨åˆ†ã€‚æ¯ä¸€æ¬¡ä¼ æ’­éƒ½æ˜¯æ–°çš„ä¼¤å®³ã€‚ç½‘ç»œæš´åŠ›å¾€å¾€ä¸æ˜¯ä»æ¶å¼€å§‹ï¼Œè€Œæ˜¯ä»ä¸€æ¬¡æ¬¡å¿½è§†å¼€å§‹çš„ã€‚" },
            { min: 20, title: "è¨€è¯­å¤±æ§è€…", tag: "åç»“å±€", color: "bg-orange-500", desc: "ä½ ç”¨æƒ…ç»ªä»£æ›¿äº†åˆ¤æ–­ã€‚å˜²è®½ã€æ”»å‡»ã€è·Ÿé£è¯„è®ºï¼Œè®©ç½‘ç»œä¸–ç•Œå˜å¾—æ›´åŠ å°–é”ã€‚ä½ çš„è¯è¯­ï¼Œå¯èƒ½å·²ç»åœ¨æ— å½¢ä¸­ä¼¤å®³äº†ä»–äººã€‚ç½‘ç»œå¹¶éæ²¡æœ‰ä»£ä»·ï¼Œæ¯ä¸€æ¬¡æ¶æ„è¾“å‡ºï¼Œéƒ½ä¼šç•™ä¸‹ç—•è¿¹ã€‚" },
            { min: 0, title: "æš´åŠ›æ‰©æ•£æº", tag: "æœ€åç»“å±€", color: "bg-red-500", desc: "ä½ å¤šæ¬¡é€‰æ‹©äº†æ”»å‡»ã€ä¼ æ’­å’Œæ”¾å¤§æ¶æ„ã€‚ä¸€æ¡è¯„è®ºã€ä¸€å¼ æˆªå›¾ã€ä¸€å¥è°£è¨€ï¼Œè¢«ä¸æ–­æ‰©æ•£ï¼Œæœ€ç»ˆæ¼”å˜æˆæ— æ³•æ§åˆ¶çš„ç½‘ç»œæš´åŠ›ã€‚ç°å®ä¸­çš„ä¼¤å®³å·²ç»å‘ç”Ÿï¼Œè€Œç½‘ç»œçš„â€œçœ‹ä¸è§â€ï¼Œå¹¶ä¸æ„å‘³ç€æ— éœ€æ‰¿æ‹…åæœã€‚" }
        ];

        let currIndex = 0;
        let score = 0;
        let isAnswering = true; // çŠ¶æ€é”ï¼Œé˜²æ­¢è¿ç‚¹

        function nav(pageId) {
            document.querySelectorAll('.page').forEach(el => el.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0,0);
        }

        function startGame() {
            currIndex = 0;
            score = 0;
            renderQuestion();
            nav('p-quiz');
        }

        function renderQuestion() {
            if (currIndex >= quizData.length) {
                finishQuiz();
                return;
            }
            
            const q = quizData[currIndex];
            isAnswering = true;

            // æ›´æ–°UI
            document.getElementById('progress-text').innerText = `${currIndex + 1}/${quizData.length}`;
            document.getElementById('progress-bar').style.width = `${((currIndex + 1) / quizData.length) * 100}%`;
            document.getElementById('q-topic').innerText = q.topic;
            document.getElementById('q-text').innerText = `${currIndex + 1}. ${q.q}`;
            document.getElementById('hint-box').classList.add('hidden');
            
            // ç”Ÿæˆé€‰é¡¹
            const opsBox = document.getElementById('options-box');
            opsBox.innerHTML = '';
            q.ops.forEach((op, idx) => {
                const btn = document.createElement('div');
                btn.className = 'option-card bg-white p-4 rounded-xl shadow-sm cursor-pointer flex items-center';
                btn.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-gray-100 text-gray-500 font-bold flex items-center justify-center mr-3 shrink-0">${String.fromCharCode(65+idx)}</div>
                    <span class="text-sm font-medium">${op}</span>
                `;
                btn.onclick = () => checkAnswer(idx, btn);
                opsBox.appendChild(btn);
            });
            
            // é‡ç½®åŠ¨ç”»
            const container = document.getElementById('quiz-container');
            container.classList.remove('fade-in');
            void container.offsetWidth; // trigger reflow
            container.classList.add('fade-in');
        }

        function checkAnswer(selectedIdx, btnEl) {
            if (!isAnswering) return;
            isAnswering = false;

            const q = quizData[currIndex];
            const isCorrect = selectedIdx === q.ans;
            
            // æ ·å¼åé¦ˆ
            if (isCorrect) {
                score += 5;
                btnEl.classList.add('bg-green-50', 'border-green-400');
                btnEl.querySelector('div').classList.add('bg-green-500', 'text-white');
            } else {
                btnEl.classList.add('bg-red-50', 'border-red-200');
                btnEl.querySelector('div').classList.add('bg-red-500', 'text-white');
            }

            // æ˜¾ç¤ºæç¤º
            document.getElementById('q-hint').innerText = q.hint;
            document.getElementById('hint-box').classList.remove('hidden');
            
            // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨ä»¥ä¾¿çœ‹åˆ°æç¤º
            setTimeout(() => {
                document.getElementById('p-quiz').scrollTo({ top: 1000, behavior: 'smooth' });
            }, 100);
        }

        function nextQuestion() {
            currIndex++;
            renderQuestion();
            document.getElementById('p-quiz').scrollTo(0,0);
        }

        function finishQuiz() {
            nav('p-calc');
            // è·‘åˆ†åŠ¨ç”»
            let dScore = 0;
            const timer = setInterval(() => {
                if (dScore >= score) {
                    clearInterval(timer);
                    setTimeout(showResult, 800);
                } else {
                    dScore++;
                    document.getElementById('final-score-display').innerText = dScore;
                }
            }, 20);
        }

        function showResult() {
            // æŸ¥æ‰¾å¯¹åº”ç»“å±€
            const res = results.find(r => score >= r.min) || results[results.length-1];
            
            document.getElementById('res-header').className = `h-24 flex items-center justify-center relative overflow-hidden ${res.color}`;
            document.getElementById('res-title').innerText = res.title;
            document.getElementById('res-tag').innerText = res.tag;
            document.getElementById('res-score').innerText = score;
            document.getElementById('res-desc').innerText = res.desc;
            
            nav('p-result');
        }
    </script>
</body>
</html>
