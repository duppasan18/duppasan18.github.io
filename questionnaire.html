<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>ç½‘ç»œå‡æ¸©é—®å·</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}

/* åŠ è½½é¡µ */
#loading {
  position: fixed;
  inset: 0;
  background: url('image/loading.png') center center / cover no-repeat;
  z-index: 10;
  transition: opacity 0.8s ease;
}
#loading.fade-out {
  opacity: 0;
  pointer-events: none;
}

/* é—®å·ä¸»ä½“ */
#questionnaire {
  display: none;
  background: url('image/background.jpg') center center / cover no-repeat;
  height: 100%;
  color: #fff;
  text-align: center;
  position: relative;
  overflow: hidden;
}

/* æ°”æ³¡åŠ¨ç”»å®¹å™¨ */
#bubbles {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
  z-index: 0;
}

/* é—®é¢˜å¡ç‰‡ */
.question {
  display: none;
  position: absolute;
  width: 80%;
  left: 50%;
  top: 20%;
  transform: translateX(-50%);
  padding: 20px;
  background: rgba(255,255,255,0.15);
  border-radius: 15px;
  backdrop-filter: blur(10px);
  animation: fadeIn 0.6s;
  z-index: 1;
}
.question.active { display: block; }
.question h2 {
  font-size: 20px;
  line-height: 1.6;
  margin-bottom: 20px;
}
.options button {
  display: block;
  width: 100%;
  margin: 10px auto;
  padding: 12px;
  background: rgba(255,255,255,0.2);
  color: #fff;
  border: 1px solid rgba(255,255,255,0.5);
  border-radius: 25px;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.3s;
}
.options button:hover { background: rgba(255,255,255,0.4); }

/* è¿”å›æŒ‰é’® */
.btn-back {
  position: absolute;
  top: 10px;
  left: 10px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: none;
  background: rgba(255,255,255,0.3);
  color: #fff;
  font-size: 18px;
  cursor: pointer;
  z-index: 2;
  display: none;
  transition: background 0.3s;
}
.btn-back:hover { background: rgba(255,255,255,0.6); }

/* æ¸©åº¦è®¡ */
.thermo-container {
  position: absolute;
  right: 20px;
  bottom: 50px;
  width: 20px;
  height: 150px;
  border: 2px solid #fff;
  border-radius: 10px;
  background: rgba(255,255,255,0.2);
  overflow: hidden;
}
.thermo-fill {
  position: absolute;
  bottom: 0;
  width: 100%;
  background: linear-gradient(to top, red, orange);
  height: 30%;
  transition: height 0.6s ease;
}

#questionnaire, #result, #share {
  height: 100%;
  width: 100%;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
}

/* ç»“æœé¡µ */
#result {
  display: none;
  background: url('image/background.jpg') center center / cover no-repeat;
  color: #fff;
  text-align: center;
  height: 100%;
  position: relative;
  animation: fadeIn 0.6s;
}
#result h2 { margin-top: 40%; font-size: 22px; }
#temp-value { font-size: 36px; color: #ffdb4d; margin-top: 10px; }
#result button {
  display: block;
  width: 70%;
  margin: 20px auto;
  padding: 12px;
  background: rgba(255,255,255,0.2);
  color: #fff;
  border: 1px solid #fff;
  border-radius: 25px;
  font-size: 16px;
}

/* åˆ†äº«é¡µ */
#share {
  display: none;
  background: #fff;
  text-align: center;
  height: 100%;
  padding-top: 30%;
  opacity: 0;
  transition: opacity 0.6s;
}
#share.visible { opacity: 1; }
#share h3 { color: #333; font-size: 22px; }
#share img { margin-top: 20px; width: 100px; height: auto; }
#share .btns button {
  display: block;
  width: 70%;
  margin: 15px auto;
  padding: 12px;
  border-radius: 25px;
  border: none;
  color: white;
  font-size: 16px;
}
.btn-generate { background: #ff6666; }
.btn-retry { background: #66b3ff; }

/* åŠ¨ç”» */
@keyframes fadeIn { from { opacity:0; transform: translateY(20px); } to { opacity:1; transform: translateY(0);} }
.bubble {
  position: absolute;
  bottom: -50px;
  font-size: 24px;
  opacity: 0.8;
  animation: rise linear forwards;
}
@keyframes rise { 0% { transform: translateY(0); opacity:0.8; } 100% { transform: translateY(-120%); opacity:0; } }

</style>
</head>
<body>
<!-- åŠ è½½é¡µ -->
<div id="loading"></div>

<!-- é—®å·é¡µ -->
<div id="questionnaire">
  <div id="bubbles"></div>
  <div class="thermo-container">
    <div class="thermo-fill" id="thermo-fill"></div>
  </div>

  <!-- é—®é¢˜1 -->
  <div class="question active" data-change="10">
    <button class="btn-back" onclick="goBack()">â†</button>
    <h2>çœ‹åˆ°æœ‰äººè¢«ç½‘ç»œæš´åŠ›æ—¶ï¼Œä½ ä¼šï¼Ÿ</h2>
    <div class="options">
      <button data-change="-5">Aï¼šæ—è§‚</button>
      <button data-change="10">Bï¼šä¸¾æŠ¥</button>
      <button data-change="8">Cï¼šç•™è¨€å®‰æ…°</button>
    </div>
  </div>

  <!-- é—®é¢˜2 -->
  <div class="question" data-change="10">
    <button class="btn-back" onclick="goBack()">â†</button>
    <h2>ä½ åœ¨è¯„è®ºåŒºæœ€å¸¸ç”¨çš„è¡¨æƒ…æ˜¯ï¼Ÿ</h2>
    <div class="options">
      <button data-change="5">ğŸ˜Š å¾®ç¬‘</button>
      <button data-change="2">ğŸ˜ å†·é™</button>
      <button data-change="-3">ğŸ˜  ç”Ÿæ°”</button>
    </div>
  </div>

  <!-- é—®é¢˜3 -->
  <div class="question" data-change="10">
    <button class="btn-back" onclick="goBack()">â†</button>
    <h2>å¦‚æœçœ‹åˆ°ä¸åŒæ„è§ï¼Œä½ ä¼šï¼Ÿ</h2>
    <div class="options">
      <button data-change="-5">Aï¼šäº‰è®º</button>
      <button data-change="8">Bï¼šç†æ€§å›å¤</button>
      <button data-change="3">Cï¼šç¦»å¼€</button>
    </div>
  </div>
</div>

<!-- ç»“æœé¡µ -->
<div id="result">
  <h2>ä½ çš„ç½‘ç»œæ¸©åº¦æ˜¯</h2>
  <div id="temp-value">0Â°</div>
  <p>â€”â€” æš–å¿ƒç½‘æ°‘ â¤ï¸ â€”â€”</p>
  <button id="btn-share" class="btn-generate">ç”Ÿæˆåˆ†äº«å›¾</button>
  <button id="btn-retry" class="btn-retry">å†æ¬¡æµ‹é‡</button>
</div>

<!-- åˆ†äº«é¡µ -->
<div id="share">
  <h3>æˆ‘ä¸ºç½‘ç»œå‡æ¸©1Â°</h3>
  <img src="image/logo.jpg" alt="å…¬ç›ŠLOGO">
  <div><img src="image/qrcode.jpg" alt="äºŒç»´ç "></div>
  <div class="btns">
    <button class="btn-retry" onclick="restart()">å†æ¬¡æµ‹é‡</button>
  </div>
</div>

<script>
// åŸºç¡€å˜é‡
const loading = document.getElementById('loading');
const questionnaire = document.getElementById('questionnaire');
const thermo = document.getElementById('thermo-fill');
const questions = document.querySelectorAll('.question');
const result = document.getElementById('result');
const tempValue = document.getElementById('temp-value');
const share = document.getElementById('share');
const bubblesContainer = document.getElementById('bubbles');

let current = 0;
let temp = 30;
let tempHistory = [temp];

// é¡µé¢åŠ è½½
window.addEventListener('load', () => {
  setTimeout(() => {
    loading.classList.add('fade-out');
    setTimeout(() => {
      loading.style.display = 'none';
      questionnaire.style.display = 'block';
      updateBackButton();
    }, 800);
  }, 1200);
});

// æ°”æ³¡åŠ¨ç”»
function createBubble() {
  const bubble = document.createElement('div');
  bubble.className = 'bubble';
  const emojiArr = ['ğŸ˜Š','ğŸ˜','ğŸ˜ ','â¤ï¸','ğŸ‘'];
  const emoji = emojiArr[Math.floor(Math.random()*emojiArr.length)];
  bubble.textContent = emoji;
  bubble.style.left = Math.random()*80 + '%';
  bubble.style.fontSize = (Math.random()*20+20)+'px';
  bubble.style.animationDuration = (Math.random()*4+4)+'s';
  bubblesContainer.appendChild(bubble);
  bubble.addEventListener('animationend', () => bubblesContainer.removeChild(bubble));
}

let bubbleInterval;
function startBubbles() { bubbleInterval=setInterval(createBubble,400); }
function stopBubbles() { if(bubbleInterval) clearInterval(bubbleInterval); }

// é€‰é¡¹ç‚¹å‡»
document.querySelectorAll('.options button').forEach(btn => {
  btn.addEventListener('click', () => {
    const change = Number(btn.dataset.change);
    temp = Math.min(100, Math.max(0, temp + change));
    thermo.style.height = temp + '%';
    tempHistory.push(temp);

    questions[current].classList.remove('active');
    current++;
    if(current < questions.length) {
      questions[current].classList.add('active');
      updateBackButton();
      if(current===1) startBubbles();
      else stopBubbles();
    } else {
      stopBubbles();
      showResult();
    }
  });
});

// è¿”å›ä¸Šä¸€é¢˜
function goBack() {
  if(current===0) return;
  questions[current].classList.remove('active');
  current--;
  questions[current].classList.add('active');
  tempHistory.pop();
  temp = tempHistory[tempHistory.length-1] || 30;
  thermo.style.height = temp + '%';
  updateBackButton();
  if(current===1) startBubbles();
  else stopBubbles();
}

// æ›´æ–°è¿”å›æŒ‰é’®æ˜¾ç¤º
function updateBackButton() {
  questions.forEach((q,i)=>{
    const btn = q.querySelector('.btn-back');
    if(btn) btn.style.display=(i>0 && i===current)?'block':'none';
  });
}

// æ˜¾ç¤ºç»“æœ
function showResult() {
  questionnaire.style.display = 'none';
  result.style.display = 'block';
  let displayTemp = 0;
  const finalTemp = Math.round(temp);
  const timer = setInterval(()=>{
    if(displayTemp<finalTemp){
      displayTemp++;
      tempValue.textContent = displayTemp+'Â°';
    } else clearInterval(timer);
  },25);
}

// åˆ†äº«é¡µæŒ‰é’®
document.getElementById('btn-share').onclick = () => {
  result.style.display = 'none';
  share.style.display = 'block';
  setTimeout(()=> share.classList.add('visible'), 50);
}

// å†æ¬¡æµ‹é‡
document.getElementById('btn-retry').onclick = restart;

function restart() {
  share.classList.remove('visible');
  setTimeout(()=> share.style.display='none', 600);
  result.style.display = 'none';
  questionnaire.style.display = 'block';
  current = 0;
  temp = 30;
  tempHistory = [temp];
  thermo.style.height = temp + '%';
  questions.forEach((q,i)=>q.classList.toggle('active', i===0));
  updateBackButton();
}
</script>
</body>
</html>
